<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Русская художественная культура в конце XIX — начале ХХ в.</title>
    <style>
    .node-container {
        --node-size: 30px;
        --image-size: calc(var(--node-size) * 2);
        --image-offset: calc(var(--image-size) / 2);
        --scale: 1;

        transition: opacity 0.3s ease;
        cursor: pointer;
    }
    .node-circle {
        r: var(--node-size);
        transition: inherit;

    }
    .node-image {
        width: var(--image-size);
        height: var(--image-size);
        /* Fallback для Safari */
        transform: translate(
            calc(var(--image-offset) * (-1)),
            calc(var(--image-offset) * (-1))
        );
        clip-path: circle(calc(var(--image-offset) - 4px));
        transition: inherit;
    }
    .node-container.highlight {
        --node-size: 45px;
        filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.9));
    }
    .node-container.dim {
        opacity: 0.1;
    }

    .label-container {
        --label-corner-radius: 6px;
        --label-padding-x: 8px;
        --label-padding-y: 4px;
        --label-font-size: 13px;
        --bg-opacity: 1;

        opacity: 1;
        pointer-events: none;
        cursor: pointer;
        transition: opacity 0.3s ease;
    }
    .label-bg {
        rx: var(--label-corner-radius);
        ry: var(--label-corner-radius);
        fill: rgba(255, 255, 255, var(--bg-opacity));
        stroke: #cccccc;
        stroke-width: 1px;
        transition: inherit;
        opacity: inherit;

    }
    .label-text {
        font-size: var(--label-font-size);
        text-anchor: middle;
        dominant-baseline: central;
        transition: inherit;
        opacity: inherit;
        pointer-events: none;
        user-select: none;
    }
    .label-container.dim {
        opacity: 0;
    }
    .label-container.highlight {
        --bg-opacity: 1;
    }


    .link {
        stroke: #999;
        stroke-opacity: 0.3;
        stroke-width: 1.0px;
        transition: opacity 0.3s ease;
    }
    .link.dim {
        stroke-opacity: 0.1 !important;
    }
    .link.highlight {
        stroke-opacity: 1 !important;
        stroke-width: 3px !important;
        stroke: #999 !important;
        filter: drop-shadow(0 10px 10px rgba(0, 0, 0, 1)) !important;
    }
    /* Стили для разных типов связей */
    .link[data-type="friend-1"] {
        stroke: #999;
        stroke-width: 2.0px;
        stroke-dasharray: 5,5;
        stroke-opacity: 0.3;
    }

    .link[data-type="friend-2"] {
        stroke: #999;
        stroke-width: 1.5px;
        stroke-dasharray: 5,5;
        stroke-opacity: 0.2;
    }

    .link[data-type="friend-3"] {
        stroke: #999;
        stroke-width: 1.0px;
        stroke-dasharray: 5,5;
        stroke-opacity: 0.1;
    }

    .link[data-type="apprentice"] {
        stroke: #999;
        stroke-width: 2.0px;
        stroke-opacity: 0.3;
    }

    .link[data-type="family"] {
        stroke: #999;
        stroke-width: 2.0px;
        stroke-opacity: 0.3;
    }

    .side-tooltip {
        position: fixed;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
        width: 300px;
        background: rgba(255, 255, 255, 0.95);
        border: 1px solid white;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        font-family: Arial, sans-serif;
        font-size: 14px;
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.3s ease;
        max-height: 80vh;
        overflow-y: auto;
        pointer-events: none;
    }

    .side-tooltip.visible {
        opacity: 1;
    }

    .tooltip-header {
        border-bottom: 2px solid #666666;
        padding-bottom: 10px;
        margin-bottom: 15px;
    }

    .tooltip-content {
        line-height: 1.6;
    }



    </style>
</head>
<body>
    <div id="graph"></div>
    <div id="sideTooltip" class="side-tooltip"></div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        // Данные графа
        const graph = {
            nodes: [
                {id: 0, short_name: "Савва Мамонтов", abr_name: "С.И. Мамонтов", img: "mamontov_si.png", group: "Меценаты и Коллекционеры", full_name: "Савва Иванович Мамонтов", tags: ["Абрамцевский Художественный Кружок", "Мамонтовская Опера"], years: "1841 - 1918", description: "<p>Выдающийся русский предприниматель и меценат, сыгравший ключевую роль в развитии отечественной культуры.</p><p>Главной заслугой Мамонтова стало создание художественного кружка в его подмосковном имении Абрамцево. При его поддержке и участии там работали такие художники, как Виктор Васнецов, Илья Репин, Валентин Серов, Михаил Врубель и многие другие.</p><p>Мамонтов также внёс огромный вклад в музыкальную жизнь, основав в Москве Частную русскую оперу. Его театр открыл миру гений Фёдора Шаляпина и популяризировал творчество композиторов «Могучей кучки». Кроме того, по его инициативе в Абрамцеве были возрождены народные промыслы, включая знаменитую абрамцево-кудринскую резьбу по дереву.</p><p>Савва Мамонтов вошёл в историю как «русский Медичи» - просвещённый покровитель искусств, чья деятельность оставила глубокий след в русской живописи, музыке и театре.</p>", group_id: 2},
                {id: 1, short_name: "Василий Поленов", abr_name: "В.Д. Поленов", img: "polenov_vd.png", group: "Художники", full_name: "Василий Дмитриевич Поленов", tags: ["Абрамцевский Художественный Кружок", "Мамонтовская Опера", "Товарищество Передвижников"], years: "1844 - 1927", description: "Описание Поленов", group_id: 7},
                {id: 2, short_name: "Елена Поленова", abr_name: "Е.Д. Поленова", img: "polenova_ed.png", group: "Художники", full_name: "Елена Дмитриевна Поленова", tags: ["Абрамцевский Художественный Кружок"], years: "nan", description: "Описание Поленова", group_id: 7},
                {id: 3, short_name: "Илья Репин", abr_name: "И.Е. Репин", img: "repin_ie.png", group: "Художники", full_name: "Илья Ефимович Репин", tags: ["Абрамцевский Художественный Кружок"], years: "nan", description: "Описание Репин", group_id: 7},
                {id: 4, short_name: "Константин Коровин", abr_name: "К.А. Коровин", img: "korovin_ka.png", group: "Художники", full_name: "Константин Алексеевич Коровин", tags: ["Абрамцевский Художественный Кружок", "Мамонтовская Опера", "Союз русских художников"], years: "nan", description: "Описание Коровин", group_id: 7},
                {id: 5, short_name: "Валентин Серов", abr_name: "В.А. Серов", img: "serov_va.png", group: "Художники", full_name: "Валентин Александрович Серов", tags: ["Абрамцевский Художественный Кружок", "Мамонтовская Опера", "Мирискусники"], years: "nan", description: "Описание Серов", group_id: 7},
                {id: 6, short_name: "Михаил Врубель", abr_name: "М.А. Врубель", img: "vrubel_ma.png", group: "Художники", full_name: "Михаил Александрович Врубель", tags: ["Абрамцевский Художественный Кружок", "Мамонтовская Опера"], years: "nan", description: "Описание Врубель", group_id: 7},
                {id: 7, short_name: "Сергей Рахманинов", abr_name: "С.В. Рахманинов", img: "rahmaninov_sv.png", group: "Композиторы и Музыканты", full_name: "Сергей Васильевич Рахманинов", tags: ["Мамонтовская Опера"], years: "nan", description: "Описание Рахманинов", group_id: 5},
                {id: 8, short_name: "Николай Римский-Корсаков", abr_name: "Н.А. Римский-Корсаков", img: "rimsky-korsakov_na.png", group: "Композиторы и Музыканты", full_name: "Николай Андреевич Римский-Корсаков", tags: ["Мамонтовская Опера", "Могучая Кучка"], years: "nan", description: "Описание Римский-Корсаков", group_id: 5},
                {id: 9, short_name: "Марк Антокольский", abr_name: "М.М. Антокольский", img: "antokolsky_mm.png", group: "Скульпторы", full_name: "Марк Матвеевич Антокольский", tags: ["Абрамцевский Художественный Кружок"], years: "nan", description: "nan", group_id: 9},
                {id: 10, short_name: "Виктор Гартман", abr_name: "В.А. Гартман", img: "gartman_va.png", group: "Архитекторы", full_name: "Виктор Александрович Гартман", tags: [], years: "nan", description: "nan", group_id: 1},
                {id: 11, short_name: "Сергей Боткин", abr_name: "С.П. Боткин", img: "botkin_sp.png", group: "Врачи и Учёные", full_name: "Сергей Петрович Боткин", tags: [], years: "nan", description: "nan", group_id: 10},
                {id: 12, short_name: "Михаил Иванов", abr_name: "М.М. Иванов", img: "ivanov_mm.png", group: "Критики", full_name: "Михаил Михайлович Иванов", tags: [], years: "nan", description: "nan", group_id: 0},
                {id: 13, short_name: "Адриан Прахов", abr_name: "А.В. Прахов", img: "prahov_av.png", group: "Критики", full_name: "Адриан Викторович Прахов", tags: [], years: "nan", description: "nan", group_id: 0},
                {id: 14, short_name: "Виктор Васнецов", abr_name: "В.М. Васнецов", img: "vasnetsov_vm.png", group: "Художники", full_name: "Виктор Михайлович Васнецов", tags: ["Абрамцевский Художественный Кружок", "Мамонтовская Опера"], years: "nan", description: "nan", group_id: 7},
                {id: 15, short_name: "Апполинарий Васнецов", abr_name: "А.М. Васнецов", img: "vasnetsov_am.png", group: "Художники", full_name: "Апполинарий Михайлович Васнецов", tags: ["Товарищество Передвижников", "Союз русских художников", "Мирискусники"], years: "nan", description: "nan", group_id: 7},
                {id: 16, short_name: "Исаак Левитан", abr_name: "И.И. Левитан", img: "levitan_ii.png", group: "Художники", full_name: "Исаак Ильич Левитан", tags: [], years: "1860 - 1900", description: "nan", group_id: 7},
                {id: 17, short_name: "Алексей Саврасов", abr_name: "А.К. Саврасов", img: "savrasov_ak.png", group: "Художники", full_name: "Алексей Кондратьевич Саврасов", tags: ["Товарищество Передвижников"], years: "1830 - 1897", description: "nan", group_id: 7},
                {id: 18, short_name: "Василий Перов", abr_name: "В.Г. Перов", img: "perov_vg.png", group: "Художники", full_name: "Василий Григорьевич Перов", tags: ["Товарищество Передвижников"], years: "1833 - 1882", description: "nan", group_id: 7},
                {id: 19, short_name: "Фёдор Шаляпин", abr_name: "Ф.И. Шаляпин", img: "shalyapin_fi.png", group: "Певцы", full_name: "Фёдор Иванович Шаляпин", tags: ["Мамонтовская Опера"], years: "1873 - 1938", description: "nan", group_id: 3},
                {id: 20, short_name: "Надежда Забела-Врубель", abr_name: "Н.И. Забела-Врубель", img: "zabela-vrubel_ni.png", group: "Певцы", full_name: "Надежда Ивановна Забела-Врубель", tags: ["Мамонтовская Опера"], years: "1868 - 1913", description: "nan", group_id: 3},
                {id: 21, short_name: "Татьяна Любатович", abr_name: "Т.С. Любатович", img: "lyubatovich_ts.png", group: "Певцы", full_name: "Татьяна Спиридоновна Любатович", tags: ["Мамонтовская Опера"], years: "1859 - 1932", description: "nan", group_id: 3},
                {id: 22, short_name: "Надежда Салина", abr_name: "Н.В. Салина", img: "salina_nv.png", group: "Певцы", full_name: "Надежда Васильевна Салина", tags: ["Мамонтовская Опера"], years: "1864 - 1956", description: "nan", group_id: 3},
                {id: 23, short_name: "Абрам Архипов", abr_name: "А.Е. Архипов", img: "arhipov_ae.png", group: "Художники", full_name: "Абрам Ефимович Архипов", tags: ["Товарищество Передвижников"], years: "1862 - 1930", description: "nan", group_id: 7},
                {id: 24, short_name: "Павел Чистяков", abr_name: "П.П. Чистяков", img: "chistyakov_pp.png", group: "Художники", full_name: "Павел Петрович Чистяков", tags: [], years: "1832 - 1919", description: "nan", group_id: 7},
                {id: 25, short_name: "Иван Крамской", abr_name: "И.Н. Крамской", img: "kramskoy_in.png", group: "Художники", full_name: "Иван Николаевич Крамской", tags: ["Товарищество Передвижников", "Бунт Четырнадцати"], years: "1837 - 1887", description: "nan", group_id: 7},
                {id: 26, short_name: "Иван Шишкин", abr_name: "И.И. Шишкин", img: "shishkin_ii.png", group: "Художники", full_name: "Иван Иванович Шишкин", tags: ["Товарищество Передвижников"], years: "1832 - 1898", description: "nan", group_id: 7},
                {id: 27, short_name: "Константин Маковский", abr_name: "К.Е. Маковский", img: "makovsky_ke.png", group: "Художники", full_name: "Константин Егорович Маковский", tags: ["Товарищество Передвижников", "Бунт Четырнадцати"], years: "1839 - 1915", description: "Старший брат", group_id: 7},
                {id: 28, short_name: "Антон Чехов", abr_name: "А.П. Чехов", img: "chehov_ap.png", group: "Писатели и Поэты", full_name: "Антон Павлович Чехов", tags: [], years: "1860 - 1904", description: "nan", group_id: 6},
                {id: 29, short_name: "Архип Куинджи", abr_name: "А.И. Куинджи", img: "kuindzhi_ai.png", group: "Художники", full_name: "Архип Иванович Куинджи", tags: ["Товарищество Передвижников"], years: "1842 - 1910", description: "nan", group_id: 7},
                {id: 30, short_name: "Николай Ярошенко", abr_name: "Н.А. Ярошенко", img: "yaroshenko_na.png", group: "Художники", full_name: "Николай Александрович Ярошенко", tags: ["Товарищество Передвижников"], years: "1846 - 1898", description: "nan", group_id: 7},
                {id: 31, short_name: "Иван Айвазовский", abr_name: "И.К. Айвазовский", img: "aivazovsky_ik.png", group: "Художники", full_name: "Иван Константинович Айвазовский", tags: [], years: "1817 - 1900", description: "nan", group_id: 7},
                {id: 32, short_name: "Дмитрий Менделеев", abr_name: "Д.И. Менделеев", img: "mendeleev_di.png", group: "Врачи и Учёные", full_name: "Дмитрий Иванович Менделеев", tags: [], years: "1834 - 1907", description: "nan", group_id: 10},
                {id: 33, short_name: "Милий Балакирев", abr_name: "М.А. Балакирев", img: "balakirev_ma.png", group: "Композиторы и Музыканты", full_name: "Милий Алексеевич Балакирев", tags: ["Могучая Кучка"], years: "1836 - 1910", description: "nan", group_id: 5},
                {id: 34, short_name: "Цезарь Кюи", abr_name: "Ц.А. Кюи", img: "kuyi_ca.png", group: "Композиторы и Музыканты", full_name: "Цезарь Антонович Кюи", tags: ["Могучая Кучка"], years: "1835 - 1918", description: "nan", group_id: 5},
                {id: 35, short_name: "Модест Мусоргский", abr_name: "М.П. Мусоргский", img: "musorgsky_mp.png", group: "Композиторы и Музыканты", full_name: "Модест Петрович Мусоргский", tags: ["Могучая Кучка"], years: "1839 - 1881", description: "nan", group_id: 5},
                {id: 36, short_name: "Александр Бородин", abr_name: "А.П. Бородин", img: "borodin_ap.png", group: "Композиторы и Музыканты", full_name: "Александр Порфирьевич Бородин", tags: ["Могучая Кучка"], years: "1833 - 1887", description: "nan", group_id: 5},
                {id: 37, short_name: "Владимир Стасов", abr_name: "В.В. Стасов", img: "stasov_vv.png", group: "Критики", full_name: "Владимир Васильевич Стасов", tags: ["Могучая Кучка"], years: "1824 - 1906", description: "nan", group_id: 0},
                {id: 38, short_name: "Иван Тургенев", abr_name: "И.С. Тургенев", img: "turgenev_is.png", group: "Писатели и Поэты", full_name: "Иван Сергеевич Тургенев", tags: [], years: "1818 - 1883", description: "nan", group_id: 6},
                {id: 39, short_name: "Лев Толстой", abr_name: "Л.Н. Толстой", img: "tolstoy_ln.png", group: "Писатели и Поэты", full_name: "Лев Николаевич Толстой", tags: [], years: "1828 - 1910", description: "nan", group_id: 6},
                {id: 40, short_name: "Наталья Якунчикова", abr_name: "Н.В. Якунчикова", img: "yakunchikova_nv.png", group: "Другие", full_name: "Наталья Васильевна Якунчикова", tags: [], years: "1858 - 1931", description: "nan", group_id: 8},
                {id: 41, short_name: "Мария Якунчикова", abr_name: "М.В. Якунчикова", img: "yakunchikova_mv.png", group: "Художники", full_name: "Мария Васильевна Якунчикова", tags: ["Мирискусники"], years: "1870 - 1902", description: "nan", group_id: 7},
                {id: 42, short_name: "Сергей Дягилев", abr_name: "С.П. Дягилев", img: "dyagilev_sp.png", group: "Меценаты и Коллекционеры", full_name: "Сергей Павлович Дягилев", tags: ["Мирискусники", "Русские Сезоны"], years: "1872 - 1929", description: "nan", group_id: 2},
                {id: 43, short_name: "Дмитрий Философов", abr_name: "Д.В. Философов", img: "filosofov_dv.png", group: "Критики", full_name: "Дмитрий Владимирович Философов", tags: ["Мирискусники"], years: "1872 - 1940", description: "nan", group_id: 0},
                {id: 44, short_name: "Александр Бенуа", abr_name: "А.Н. Бенуа", img: "benua_an.png", group: "Художники", full_name: "Александр Николаевич Бенуа", tags: ["Мирискусники"], years: "1870 - 1960", description: "nan", group_id: 7},
                {id: 45, short_name: "Игорь Грабарь", abr_name: "И.Э. Грабарь", img: "grabar_ie.png", group: "Художники", full_name: "Игорь Эммануилович Грабарь", tags: ["Мирискусники"], years: "1871 - 1960", description: "nan", group_id: 7},
                {id: 46, short_name: "Филипп Малявин", abr_name: "Ф.А. Малявин", img: "malyavin_fa.png", group: "Художники", full_name: "Филипп Андреевич Малявин", tags: ["Мирискусники"], years: "1869 - 1940", description: "nan", group_id: 7},
                {id: 47, short_name: "Николай Рерих", abr_name: "Н.К. Рерих", img: "rerih_nk.png", group: "Художники", full_name: "Николай Константинович Рерих", tags: ["Мирискусники"], years: "1874 - 1947", description: "nan", group_id: 7},
                {id: 48, short_name: "Константин Сомов", abr_name: "К.А. Сомов", img: "somov_ka.png", group: "Художники", full_name: "Константин Андреевич Сомов", tags: ["Мирискусники"], years: "1869 - 1939", description: "nan", group_id: 7},
                {id: 49, short_name: "Лев Бакст", abr_name: "Л.С. Бакст", img: "bakst_ls.png", group: "Художники", full_name: "Лев Самойлович Бакст", tags: ["Мирискусники"], years: "1866 - 1924", description: "nan", group_id: 7},
                {id: 50, short_name: "Борис Кустодиев", abr_name: "Б.М. Кустодиев", img: "kustodiev_bm.png", group: "Художники", full_name: "Борис Михайлович Кустодиев", tags: ["Мирискусники"], years: "1878 - 1927", description: "nan", group_id: 7},
                {id: 51, short_name: "Иван Билибин", abr_name: "И.Я. Билибин", img: "bilibin_iy.png", group: "Художники", full_name: "Иван Яковлевич Билибин", tags: ["Мирискусники"], years: "1876 - 1942", description: "nan", group_id: 7},
                {id: 52, short_name: "Михаил Нестеров", abr_name: "М.В. Нестеров", img: "nesterov_mv.png", group: "Художники", full_name: "Михаил Васильевич Нестеров", tags: ["Товарищество Передвижников", "Мирискусники"], years: "1862 - 1942", description: "nan", group_id: 7},
                {id: 53, short_name: "Павел Третьяков", abr_name: "П.М. Третьяков", img: "tretyakov_pm.png", group: "Меценаты и Коллекционеры", full_name: "Павел Михайлович Третьяков", tags: [], years: "1832 - 1898", description: "nan", group_id: 2},
                {id: 54, short_name: "Иван Сеченов", abr_name: "И.М. Сеченов", img: "sechenov_im.png", group: "Врачи и Учёные", full_name: "Иван Михайлович Сеченов", tags: [], years: "1829 - 1905", description: "nan", group_id: 10},
                {id: 55, short_name: "Антон Рубинштейн", abr_name: "А.Г. Рубинштейн", img: "rubinshtein_ag.png", group: "Композиторы и Музыканты", full_name: "Антон Григорьевич Рубинштейн", tags: [], years: "1829 - 1894", description: "nan", group_id: 5},
                {id: 56, short_name: "Николай Рубинштейн", abr_name: "Н.Г. Рубинштейн", img: "rubinshtein_ng.png", group: "Композиторы и Музыканты", full_name: "Николай Григорьевич Рубинштейн", tags: [], years: "1835 - 1881", description: "nan", group_id: 5},
                {id: 57, short_name: "Александр Островский", abr_name: "А.Н. Островский", img: "ostrovsky_an.png", group: "Композиторы и Музыканты", full_name: "Александр Николаевич Островский", tags: [], years: "1823 - 1886", description: "nan", group_id: 5},
                {id: 58, short_name: "Пётр Чайковский", abr_name: "П.И. Чайковский", img: "chaikovsky_pi.png", group: "Композиторы и Музыканты", full_name: "Пётр Ильич Чайковский", tags: [], years: "1840 - 1893", description: "nan", group_id: 5},
                {id: 59, short_name: "Александр Брюллов", abr_name: "А.П. Брюллов", img: "brullov_ap.png", group: "Архитекторы", full_name: "Александр Павлович Брюллов", tags: [], years: "1798 - 1877", description: "русский архитектор, старший брат и ближайший друг живописца Карла Брюллова", group_id: 1},
                {id: 60, short_name: "Карл Брюллов", abr_name: "К.П. Брюллов", img: "brullov_kp.png", group: "Художники", full_name: "Карл Павлович Брюллов", tags: [], years: "1799 - 1852", description: "nan", group_id: 7},
                {id: 61, short_name: "Павел Брюллов", abr_name: "П.А. Брюллов", img: "brullov_pa.png", group: "Художники", full_name: "Павел Александрович Брюллов", tags: ["Товарищество Передвижников"], years: "1840 - 1914", description: "nan", group_id: 7},
                {id: 62, short_name: "Владимир Маковский", abr_name: "В.Е. Маковский", img: "makovsky_ve.png", group: "Художники", full_name: "Владимир Егорович Маковский", tags: ["Товарищество Передвижников"], years: "1846 - 1920", description: "Младший брат", group_id: 7},
                {id: 63, short_name: "Николай Маковский", abr_name: "Н.Е. Маковский", img: "makovsky_ne.png", group: "Художники", full_name: "Николай Егорович Маковский", tags: ["Товарищество Передвижников"], years: "1841 - 1886", description: "Средний брат", group_id: 7},
                {id: 64, short_name: "Илларион Прянишников", abr_name: "И.М. Прянишников", img: "pryanishnikov_im.png", group: "Художники", full_name: "Илларион Михайлович Прянишников", tags: ["Товарищество Передвижников"], years: "1840 - 1894", description: "nan", group_id: 7},
                {id: 65, short_name: "Григорий Мясоедов", abr_name: "Г.Г. Мясоедов", img: "myasoedov_gg.png", group: "Художники", full_name: "Григорий Григорьевич Мясоедов", tags: ["Товарищество Передвижников"], years: "1834 - 1911", description: "nan", group_id: 7},
                {id: 66, short_name: "Ефим Волков", abr_name: "Е.Е. Волков", img: "volkov_ee.png", group: "Художники", full_name: "Ефим Ефимович Волков", tags: ["Товарищество Передвижников"], years: "1844 - 1920", description: "nan", group_id: 7},
                {id: 67, short_name: "Василий Суриков", abr_name: "В.И. Суриков", img: "surikov_vi.png", group: "Художники", full_name: "Василий Иванович Суриков", tags: ["Товарищество Передвижников"], years: "1848 - 1916", description: "nan", group_id: 7},
                {id: 68, short_name: "Василий Максимов", abr_name: "В.М. Максимов", img: "maksimov_vm.png", group: "Художники", full_name: "Василий Максимович Максимов", tags: ["Товарищество Передвижников"], years: "1844 - 1911", description: "nan", group_id: 7},
                {id: 69, short_name: "Николай Ге", abr_name: "Н.Н. Ге", img: "ge_nn.png", group: "Художники", full_name: "Николай Николаевич Ге", tags: ["Товарищество Передвижников"], years: "1831 - 1894", description: "nan", group_id: 7},
                {id: 70, short_name: "Василий Верещагин", abr_name: "В.В. Верещагин", img: "vereschagin_vv.png", group: "Художники", full_name: "Василий Васильевич Верещагин", tags: ["Товарищество Передвижников"], years: "1842 - 1904", description: "nan", group_id: 7},
                {id: 71, short_name: "Карл Лемох", abr_name: "К.В. Лемох", img: "lemoh_kv.png", group: "Художники", full_name: "Карл Викентьевич Лемох", tags: ["Товарищество Передвижников", "Бунт Четырнадцати"], years: "1841 - 1910", description: "nan", group_id: 7},
                {id: 72, short_name: "Александр Серов", abr_name: "А.Н. Серов", img: "serov_an.png", group: "Композиторы и Музыканты", full_name: "Александр Николаевич Серов", tags: [], years: "1820 - 1871", description: "nan", group_id: 5},
                {id: 73, short_name: "Александр Герцен", abr_name: "А.И. Герцен", img: "gercen_ai.png", group: "Писатели и Поэты", full_name: "Александр Иванович Герцен", tags: [], years: "1812 - 1870", description: "nan", group_id: 6},
                {id: 74, short_name: "Фёдор Достоевский", abr_name: "Ф.М. Достоевский", img: "dostoevsky_fm.png", group: "Писатели и Поэты", full_name: "Фёдор Михайлович Достоевский", tags: [], years: "1821 - 1881", description: "nan", group_id: 6},
                {id: 75, short_name: "Фёдор Тютчев", abr_name: "Ф.И. Тютчев", img: "tutchev_fi.png", group: "Писатели и Поэты", full_name: "Фёдор Иванович Тютчев", tags: [], years: "1803 - 1873", description: "nan", group_id: 6},
                {id: 76, short_name: "Николай Некрасов", abr_name: "Н.А. Некрасов", img: "nekrasov_na.png", group: "Писатели и Поэты", full_name: "Николай Алексеевич Некрасов", tags: [], years: "1821 - 1878", description: "nan", group_id: 6},
                {id: 77, short_name: "Михаил Салтыков-Щедрин", abr_name: "М.Е. Салтыков-Щедрин", img: "saltykov-schedrin_me.png", group: "Писатели и Поэты", full_name: "Михаил Евграфович Салтыков-Щедрин", tags: [], years: "1826 - 1889", description: "nan", group_id: 6},
                {id: 78, short_name: "Сергей Маковский", abr_name: "С.К. Маковский", img: "makovsky_sk.png", group: "Писатели и Поэты", full_name: "Сергей Константинович Маковский", tags: [], years: "1877 - 1962", description: "Сын К. Е. Маковского", group_id: 6},
                {id: 79, short_name: "Михаил Глинка", abr_name: "М.И. Глинка", img: "glinka_mi.png", group: "Композиторы и Музыканты", full_name: "Михаил Иванович Глинка", tags: [], years: "1804 - 1857", description: "nan", group_id: 5},
                {id: 80, short_name: "Нестор Кукольник", abr_name: "Н.В. Кукольник", img: "kukolnik_nv.png", group: "Писатели и Поэты", full_name: "Нестор Васильевич Кукольник", tags: [], years: "1809 - 1868", description: "nan", group_id: 6},
                {id: 81, short_name: "Александр Пушкин", abr_name: "А.С. Пушкин", img: "pushkin_as.png", group: "Писатели и Поэты", full_name: "Александр Сергеевич Пушкин", tags: [], years: "1799 - 1837", description: "nan", group_id: 6},
                {id: 82, short_name: "Евгений Баратынский", abr_name: "Е.А. Баратынский", img: "baratynsky_ea.png", group: "Писатели и Поэты", full_name: "Евгений Абрамович Баратынский", tags: [], years: "1800 - 1844", description: "nan", group_id: 6},
                {id: 83, short_name: "Николай Гоголь", abr_name: "Н.В. Гоголь", img: "gogol_nv.png", group: "Писатели и Поэты", full_name: "Николай Васильевич Гоголь", tags: [], years: "1809 - 1852", description: "nan", group_id: 6},
                {id: 84, short_name: "Александр Грибоедов", abr_name: "А.С. Грибоедов", img: "griboedov_as.png", group: "Писатели и Поэты", full_name: "Александр Сергеевич Грибоедов", tags: [], years: "1795 - 1829", description: "nan", group_id: 6},
                {id: 85, short_name: "Михаил Лермонтов", abr_name: "М.Ю. Лермонтов", img: "lermontov_mu.png", group: "Писатели и Поэты", full_name: "Михаил Юрьевич Лермонтов", tags: [], years: "1814 - 1841", description: "nan", group_id: 6},
                {id: 86, short_name: "Владимир Соловьёв", abr_name: "В.С. Соловьёв", img: "solovyov_vs.png", group: "Философы", full_name: "Владимир Сергеевич Соловьёв", tags: [], years: "1853 - 1900", description: "nan", group_id: 4},
                {id: 87, short_name: "Николай Бердяев", abr_name: "Н.А. Бердяев", img: "berdyaev_na.png", group: "Философы", full_name: "Николай Александрович Бердяев", tags: [], years: "1874 - 1948", description: "nan", group_id: 4},
                {id: 88, short_name: "Константин Леонтьев", abr_name: "К.Н. Леонтьев", img: "leontev_kn.png", group: "Философы", full_name: "Константин Николаевич Леонтьев", tags: [], years: "1831 - 1891", description: "nan", group_id: 4},
                {id: 89, short_name: "Иван Цветков", abr_name: "И.Е. Цветков", img: "cvetkov_ie.png", group: "Меценаты и Коллекционеры", full_name: "Иван Евменьевич Цветков", tags: [], years: "1845 - 1917", description: "nan", group_id: 2},
                {id: 90, short_name: "Егор Маковский", abr_name: "Е.И. Маковский", img: "makovsky_ei.png", group: "Художники", full_name: "Егор Иванович Маковский", tags: [], years: "1802 - 1886", description: "Отец Константина, Николая и Владимира Маковских", group_id: 7},
                {id: 91, short_name: "Александра Маковская", abr_name: "А.Е. Маковская", img: "makovskay_ae.png", group: "Художники", full_name: "Александра Егоровна Маковская", tags: [], years: "1837 — 1915", description: "Cтаршая сестра Константина, Николая и Владимира Маковских.", group_id: 7},
                {id: 92, short_name: "Андрей Сомов", abr_name: "А.И. Сомов", img: "somov_ai.png", group: "Меценаты и Коллекционеры", full_name: "Андрей Иванович Сомов", tags: [], years: "1830 - 1909", description: "Русский искусствовед, отец живописца Константина Сомова", group_id: 2},
                {id: 93, short_name: "Василий Тропинин", abr_name: "В.А. Тропинин", img: "tropinin_va.png", group: "Художники", full_name: "Василий Андреевич Тропинин", tags: [], years: "1776 - 1857", description: "nan", group_id: 7},
                {id: 94, short_name: "Александр Иванов", abr_name: "А.А. Иванов", img: "ivanov_aa.png", group: "Художники", full_name: "Александр Андреевич Иванов", tags: [], years: "1806 - 1858", description: "nan", group_id: 7},
                {id: 95, short_name: "Николай Дубовской", abr_name: "Н.Н. Дубовской", img: "dubovskoy_nn.png", group: "Художники", full_name: "Николай Никанорович Дубовской", tags: ["Товарищество Передвижников"], years: "1859 - 1918", description: "nan", group_id: 7},
                {id: 96, short_name: "Михаил Клодт", abr_name: "М.К. Клодт", img: "klodt_mk.png", group: "Художники", full_name: "Михаил Константинович Клодт", tags: ["Товарищество Передвижников"], years: "1832 - 1902", description: "Клодт 1-й", group_id: 7},
                {id: 97, short_name: "Михаил Клодт", abr_name: "М.П. Клодт", img: "klodt_mp.png", group: "Художники", full_name: "Михаил Петрович Клодт", tags: ["Товарищество Передвижников"], years: "1835 - 1914", description: "Клодт 2-й", group_id: 7},
                {id: 98, short_name: "Александр Беггров", abr_name: "А.К. Беггров", img: "beggrov_ak.png", group: "Художники", full_name: "Александр Карлович Беггров", tags: ["Товарищество Передвижников"], years: "1841 - 1914", description: "nan", group_id: 7},
                {id: 99, short_name: "Александр Киселёв", abr_name: "А.А. Киселёв", img: "kiselev_aa.png", group: "Художники", full_name: "Александр Александрович Киселёв", tags: ["Товарищество Передвижников"], years: "1838 - 1911", description: "nan", group_id: 7},
                {id: 100, short_name: "Николай Касаткин", abr_name: "Н.А. Касаткин", img: "kasatkin_na.png", group: "Художники", full_name: "Николай Алексеевич Касаткин", tags: ["Товарищество Передвижников"], years: "1859 - 1930", description: "nan", group_id: 7},
                {id: 101, short_name: "Алексей Корин", abr_name: "А.М. Корин", img: "korin_am.png", group: "Художники", full_name: "Алексей Михайлович Корин", tags: ["Товарищество Передвижников"], years: "1865 - 1923", description: "nan", group_id: 7},
                {id: 102, short_name: "Павел Корин", abr_name: "П.Д. Корин", img: "korin_pd.png", group: "Художники", full_name: "Павел Дмитриевич Корин", tags: [], years: "1892 - 1967", description: "nan", group_id: 7},
                {id: 103, short_name: "Константин Савицкий", abr_name: "К.А. Савицкий", img: "savicky_ka.png", group: "Художники", full_name: "Константин Аполлонович Савицкий", tags: [], years: "1844 - 1905", description: "nan", group_id: 7}
            ],
            links: [
                {source: 0, target: 1, type: "friend-1", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Василий Дмитриевич Поленов", description: "Описание Мамонтов - Поленов"},
                {source: 0, target: 3, type: "friend-1", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Илья Ефимович Репин", description: "Описание Мамонтов - Репин"},
                {source: 0, target: 7, type: "friend-2", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Сергей Васильевич Рахманинов", description: "Описание Мамонтов - Рахманинов"},
                {source: 0, target: 8, type: "friend-2", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Николай Андреевич Римский-Корсаков", description: "Описание Мамонтов - Корсаков"},
                {source: 0, target: 14, type: "friend-1", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Виктор Михайлович Васнецов", description: "nan"},
                {source: 14, target: 15, type: "family", full_name_1: "Виктор Михайлович Васнецов", full_name_2: "Апполинарий Михайлович Васнецов", description: "nan"},
                {source: 0, target: 5, type: "friend-1", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Валентин Александрович Серов", description: "nan"},
                {source: 0, target: 6, type: "friend-1", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Михаил Александрович Врубель", description: "nan"},
                {source: 0, target: 4, type: "friend-1", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Константин Алексеевич Коровин", description: "nan"},
                {source: 0, target: 12, type: "friend-2", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Михаил Михайлович Иванов", description: "nan"},
                {source: 0, target: 10, type: "friend-2", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Виктор Александрович Гартман", description: "nan"},
                {source: 0, target: 13, type: "friend-2", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Адриан Викторович Прахов", description: "nan"},
                {source: 3, target: 5, type: "apprentice", full_name_1: "Илья Ефимович Репин", full_name_2: "Валентин Александрович Серов", description: "nan"},
                {source: 5, target: 4, type: "friend-1", full_name_1: "Валентин Александрович Серов", full_name_2: "Константин Алексеевич Коровин", description: "nan"},
                {source: 1, target: 3, type: "friend-1", full_name_1: "Василий Дмитриевич Поленов", full_name_2: "Илья Ефимович Репин", description: "Описание Поленов - Репин"},
                {source: 1, target: 2, type: "family", full_name_1: "Василий Дмитриевич Поленов", full_name_2: "Елена Дмитриевна Поленова", description: "Описание Поленов - Поленова"},
                {source: 9, target: 0, type: "friend-1", full_name_1: "Марк Матвеевич Антокольский", full_name_2: "Савва Иванович Мамонтов", description: "nan"},
                {source: 9, target: 10, type: "friend-2", full_name_1: "Марк Матвеевич Антокольский", full_name_2: "Виктор Александрович Гартман", description: "nan"},
                {source: 9, target: 12, type: "friend-1", full_name_1: "Марк Матвеевич Антокольский", full_name_2: "Михаил Михайлович Иванов", description: "nan"},
                {source: 1, target: 16, type: "apprentice", full_name_1: "Василий Дмитриевич Поленов", full_name_2: "Исаак Ильич Левитан", description: "nan"},
                {source: 1, target: 4, type: "apprentice", full_name_1: "Василий Дмитриевич Поленов", full_name_2: "Константин Алексеевич Коровин", description: "nan"},
                {source: 1, target: 13, type: "apprentice", full_name_1: "Василий Дмитриевич Поленов", full_name_2: "Адриан Викторович Прахов", description: "nan"},
                {source: 1, target: 67, type: "friend-2", full_name_1: "Василий Дмитриевич Поленов", full_name_2: "Василий Иванович Суриков", description: "nan"},
                {source: 1, target: 40, type: "family", full_name_1: "Василий Дмитриевич Поленов", full_name_2: "Наталья Васильевна Якунчикова", description: "nan"},
                {source: 1, target: 39, type: "friend-2", full_name_1: "Василий Дмитриевич Поленов", full_name_2: "Лев Николаевич Толстой", description: "nan"},
                {source: 17, target: 16, type: "apprentice", full_name_1: "Алексей Кондратьевич Саврасов", full_name_2: "Исаак Ильич Левитан", description: "nan"},
                {source: 18, target: 16, type: "apprentice", full_name_1: "Василий Григорьевич Перов", full_name_2: "Исаак Ильич Левитан", description: "nan"},
                {source: 0, target: 19, type: "friend-1", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Фёдор Иванович Шаляпин", description: "nan"},
                {source: 0, target: 20, type: "friend-2", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Надежда Ивановна Забела-Врубель", description: "nan"},
                {source: 0, target: 21, type: "friend-2", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Татьяна Спиридоновна Любатович", description: "nan"},
                {source: 0, target: 22, type: "friend-2", full_name_1: "Савва Иванович Мамонтов", full_name_2: "Надежда Васильевна Салина", description: "nan"},
                {source: 7, target: 22, type: "friend-2", full_name_1: "Сергей Васильевич Рахманинов", full_name_2: "Надежда Васильевна Салина", description: "nan"},
                {source: 19, target: 22, type: "friend-2", full_name_1: "Фёдор Иванович Шаляпин", full_name_2: "Надежда Васильевна Салина", description: "nan"},
                {source: 6, target: 20, type: "family", full_name_1: "Михаил Александрович Врубель", full_name_2: "Надежда Ивановна Забела-Врубель", description: "nan"},
                {source: 1, target: 23, type: "apprentice", full_name_1: "Василий Дмитриевич Поленов", full_name_2: "Абрам Ефимович Архипов", description: "nan"},
                {source: 24, target: 1, type: "apprentice", full_name_1: "Павел Петрович Чистяков", full_name_2: "Василий Дмитриевич Поленов", description: "nan"},
                {source: 24, target: 2, type: "apprentice", full_name_1: "Павел Петрович Чистяков", full_name_2: "Елена Дмитриевна Поленова", description: "nan"},
                {source: 24, target: 3, type: "apprentice", full_name_1: "Павел Петрович Чистяков", full_name_2: "Илья Ефимович Репин", description: "nan"},
                {source: 24, target: 6, type: "apprentice", full_name_1: "Павел Петрович Чистяков", full_name_2: "Михаил Александрович Врубель", description: "nan"},
                {source: 24, target: 14, type: "apprentice", full_name_1: "Павел Петрович Чистяков", full_name_2: "Виктор Михайлович Васнецов", description: "nan"},
                {source: 3, target: 25, type: "friend-1", full_name_1: "Илья Ефимович Репин", full_name_2: "Иван Николаевич Крамской", description: "nan"},
                {source: 1, target: 25, type: "friend-1", full_name_1: "Василий Дмитриевич Поленов", full_name_2: "Иван Николаевич Крамской", description: "nan"},
                {source: 26, target: 25, type: "friend-1", full_name_1: "Иван Иванович Шишкин", full_name_2: "Иван Николаевич Крамской", description: "nan"},
                {source: 27, target: 25, type: "friend-1", full_name_1: "Константин Егорович Маковский", full_name_2: "Иван Николаевич Крамской", description: "nan"},
                {source: 28, target: 16, type: "friend-1", full_name_1: "Антон Павлович Чехов", full_name_2: "Исаак Ильич Левитан", description: "nan"},
                {source: 29, target: 3, type: "friend-1", full_name_1: "Архип Иванович Куинджи", full_name_2: "Илья Ефимович Репин", description: "nan"},
                {source: 29, target: 25, type: "friend-1", full_name_1: "Архип Иванович Куинджи", full_name_2: "Иван Николаевич Крамской", description: "nan"},
                {source: 29, target: 32, type: "friend-1", full_name_1: "Архип Иванович Куинджи", full_name_2: "Дмитрий Иванович Менделеев", description: "nan"},
                {source: 29, target: 31, type: "friend-3", full_name_1: "Архип Иванович Куинджи", full_name_2: "Иван Константинович Айвазовский", description: "nan"},
                {source: 29, target: 30, type: "friend-2", full_name_1: "Архип Иванович Куинджи", full_name_2: "Николай Александрович Ярошенко", description: "nan"},
                {source: 37, target: 8, type: "friend-1", full_name_1: "Владимир Васильевич Стасов", full_name_2: "Николай Андреевич Римский-Корсаков", description: "nan"},
                {source: 37, target: 33, type: "friend-1", full_name_1: "Владимир Васильевич Стасов", full_name_2: "Милий Алексеевич Балакирев", description: "nan"},
                {source: 37, target: 34, type: "friend-1", full_name_1: "Владимир Васильевич Стасов", full_name_2: "Цезарь Антонович Кюи", description: "nan"},
                {source: 37, target: 35, type: "friend-1", full_name_1: "Владимир Васильевич Стасов", full_name_2: "Модест Петрович Мусоргский", description: "nan"},
                {source: 37, target: 36, type: "friend-1", full_name_1: "Владимир Васильевич Стасов", full_name_2: "Александр Порфирьевич Бородин", description: "nan"},
                {source: 37, target: 9, type: "friend-3", full_name_1: "Владимир Васильевич Стасов", full_name_2: "Марк Матвеевич Антокольский", description: "nan"},
                {source: 37, target: 3, type: "friend-3", full_name_1: "Владимир Васильевич Стасов", full_name_2: "Илья Ефимович Репин", description: "nan"},
                {source: 37, target: 38, type: "friend-3", full_name_1: "Владимир Васильевич Стасов", full_name_2: "Иван Сергеевич Тургенев", description: "nan"},
                {source: 37, target: 39, type: "friend-3", full_name_1: "Владимир Васильевич Стасов", full_name_2: "Лев Николаевич Толстой", description: "nan"},
                {source: 8, target: 33, type: "friend-1", full_name_1: "Николай Андреевич Римский-Корсаков", full_name_2: "Милий Алексеевич Балакирев", description: "nan"},
                {source: 8, target: 34, type: "friend-1", full_name_1: "Николай Андреевич Римский-Корсаков", full_name_2: "Цезарь Антонович Кюи", description: "nan"},
                {source: 8, target: 35, type: "friend-1", full_name_1: "Николай Андреевич Римский-Корсаков", full_name_2: "Модест Петрович Мусоргский", description: "nan"},
                {source: 8, target: 36, type: "friend-1", full_name_1: "Николай Андреевич Римский-Корсаков", full_name_2: "Александр Порфирьевич Бородин", description: "nan"},
                {source: 33, target: 34, type: "friend-1", full_name_1: "Милий Алексеевич Балакирев", full_name_2: "Цезарь Антонович Кюи", description: "nan"},
                {source: 33, target: 35, type: "friend-1", full_name_1: "Милий Алексеевич Балакирев", full_name_2: "Модест Петрович Мусоргский", description: "nan"},
                {source: 33, target: 36, type: "friend-1", full_name_1: "Милий Алексеевич Балакирев", full_name_2: "Александр Порфирьевич Бородин", description: "nan"},
                {source: 34, target: 35, type: "friend-1", full_name_1: "Цезарь Антонович Кюи", full_name_2: "Модест Петрович Мусоргский", description: "nan"},
                {source: 34, target: 36, type: "friend-1", full_name_1: "Цезарь Антонович Кюи", full_name_2: "Александр Порфирьевич Бородин", description: "nan"},
                {source: 35, target: 36, type: "friend-1", full_name_1: "Модест Петрович Мусоргский", full_name_2: "Александр Порфирьевич Бородин", description: "nan"},
                {source: 36, target: 32, type: "friend-2", full_name_1: "Александр Порфирьевич Бородин", full_name_2: "Дмитрий Иванович Менделеев", description: "nan"},
                {source: 36, target: 54, type: "friend-2", full_name_1: "Александр Порфирьевич Бородин", full_name_2: "Иван Михайлович Сеченов", description: "nan"},
                {source: 36, target: 14, type: "friend-2", full_name_1: "Александр Порфирьевич Бородин", full_name_2: "Виктор Михайлович Васнецов", description: "nan"},
                {source: 38, target: 1, type: "friend-2", full_name_1: "Иван Сергеевич Тургенев", full_name_2: "Василий Дмитриевич Поленов", description: "nan"},
                {source: 38, target: 39, type: "friend-2", full_name_1: "Иван Сергеевич Тургенев", full_name_2: "Лев Николаевич Толстой", description: "nan"},
                {source: 40, target: 41, type: "family", full_name_1: "Наталья Васильевна Якунчикова", full_name_2: "Мария Васильевна Якунчикова", description: "nan"},
                {source: 42, target: 5, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Валентин Александрович Серов", description: "nan"},
                {source: 42, target: 6, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Михаил Александрович Врубель", description: "nan"},
                {source: 42, target: 16, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Исаак Ильич Левитан", description: "nan"},
                {source: 42, target: 43, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Дмитрий Владимирович Философов", description: "nan"},
                {source: 42, target: 44, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Александр Николаевич Бенуа", description: "nan"},
                {source: 42, target: 45, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Игорь Эммануилович Грабарь", description: "nan"},
                {source: 42, target: 46, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Филипп Андреевич Малявин", description: "nan"},
                {source: 42, target: 47, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Николай Константинович Рерих", description: "nan"},
                {source: 42, target: 48, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Константин Андреевич Сомов", description: "nan"},
                {source: 42, target: 49, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Лев Самойлович Бакст", description: "nan"},
                {source: 42, target: 50, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Борис Михайлович Кустодиев", description: "nan"},
                {source: 42, target: 51, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Иван Яковлевич Билибин", description: "nan"},
                {source: 42, target: 52, type: "friend-2", full_name_1: "Сергей Павлович Дягилев", full_name_2: "Михаил Васильевич Нестеров", description: "nan"},
                {source: 53, target: 0, type: "friend-2", full_name_1: "Павел Михайлович Третьяков", full_name_2: "Савва Иванович Мамонтов", description: "nan"},
                {source: 55, target: 38, type: "friend-2", full_name_1: "Антон Григорьевич Рубинштейн", full_name_2: "Иван Сергеевич Тургенев", description: "Ежегодно выезжая за границу, он знакомится с Иваном Тургеневым"},
                {source: 55, target: 22, type: "friend-2", full_name_1: "Антон Григорьевич Рубинштейн", full_name_2: "Надежда Васильевна Салина", description: "По рекомендации А. Рубинштейна была принята в частную оперу С. Мамонтова"},
                {source: 55, target: 56, type: "family", full_name_1: "Антон Григорьевич Рубинштейн", full_name_2: "Николай Григорьевич Рубинштейн", description: "nan"},
                {source: 55, target: 57, type: "friend-2", full_name_1: "Антон Григорьевич Рубинштейн", full_name_2: "Александр Николаевич Островский", description: "Учился на юридическом факультете МГУ, сблизился с Островским"},
                {source: 55, target: 58, type: "apprentice", full_name_1: "Антон Григорьевич Рубинштейн", full_name_2: "Пётр Ильич Чайковский", description: "Помогая мало зарабатывающему Чайковскому, он поселил его в своей квартире"},
                {source: 59, target: 60, type: "family", full_name_1: "Александр Павлович Брюллов", full_name_2: "Карл Павлович Брюллов", description: "Братья"},
                {source: 59, target: 61, type: "family", full_name_1: "Александр Павлович Брюллов", full_name_2: "Павел Александрович Брюллов", description: "Сын"},
                {source: 62, target: 63, type: "family", full_name_1: "Владимир Егорович Маковский", full_name_2: "Николай Егорович Маковский", description: "nan"},
                {source: 63, target: 27, type: "family", full_name_1: "Николай Егорович Маковский", full_name_2: "Константин Егорович Маковский", description: "nan"},
                {source: 27, target: 62, type: "family", full_name_1: "Константин Егорович Маковский", full_name_2: "Владимир Егорович Маковский", description: "nan"},
                {source: 25, target: 71, type: "friend-2", full_name_1: "Иван Николаевич Крамской", full_name_2: "Карл Викентьевич Лемох", description: "nan"},
                {source: 25, target: 64, type: "friend-2", full_name_1: "Иван Николаевич Крамской", full_name_2: "Илларион Михайлович Прянишников", description: "nan"},
                {source: 25, target: 65, type: "friend-2", full_name_1: "Иван Николаевич Крамской", full_name_2: "Григорий Григорьевич Мясоедов", description: "nan"},
                {source: 25, target: 66, type: "friend-2", full_name_1: "Иван Николаевич Крамской", full_name_2: "Ефим Ефимович Волков", description: "nan"},
                {source: 25, target: 68, type: "friend-2", full_name_1: "Иван Николаевич Крамской", full_name_2: "Василий Максимович Максимов", description: "nan"},
                {source: 25, target: 69, type: "friend-2", full_name_1: "Иван Николаевич Крамской", full_name_2: "Николай Николаевич Ге", description: "nan"},
                {source: 25, target: 70, type: "friend-2", full_name_1: "Иван Николаевич Крамской", full_name_2: "Василий Васильевич Верещагин", description: "nan"},
                {source: 25, target: 61, type: "friend-2", full_name_1: "Иван Николаевич Крамской", full_name_2: "Павел Александрович Брюллов", description: "nan"},
                {source: 72, target: 5, type: "family", full_name_1: "Александр Николаевич Серов", full_name_2: "Валентин Александрович Серов", description: "Cын"},
                {source: 27, target: 78, type: "family", full_name_1: "Константин Егорович Маковский", full_name_2: "Сергей Константинович Маковский", description: "Cын"},
                {source: 11, target: 9, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Марк Матвеевич Антокольский", description: "nan"},
                {source: 11, target: 32, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Дмитрий Иванович Менделеев", description: "nan"},
                {source: 11, target: 74, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Фёдор Михайлович Достоевский", description: "nan"},
                {source: 11, target: 24, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Павел Петрович Чистяков", description: "nan"},
                {source: 11, target: 26, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Иван Иванович Шишкин", description: "nan"},
                {source: 11, target: 33, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Милий Алексеевич Балакирев", description: "nan"},
                {source: 11, target: 36, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Александр Порфирьевич Бородин", description: "nan"},
                {source: 11, target: 73, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Александр Иванович Герцен", description: "nan"},
                {source: 11, target: 75, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Фёдор Иванович Тютчев", description: "nan"},
                {source: 11, target: 39, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Лев Николаевич Толстой", description: "nan"},
                {source: 11, target: 25, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Иван Николаевич Крамской", description: "nan"},
                {source: 11, target: 76, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Николай Алексеевич Некрасов", description: "nan"},
                {source: 11, target: 77, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Михаил Евграфович Салтыков-Щедрин", description: "nan"},
                {source: 11, target: 78, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Сергей Константинович Маковский", description: "nan"},
                {source: 11, target: 3, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Илья Ефимович Репин", description: "nan"},
                {source: 11, target: 5, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Валентин Александрович Серов", description: "nan"},
                {source: 11, target: 29, type: "friend-2", full_name_1: "Сергей Петрович Боткин", full_name_2: "Архип Иванович Куинджи", description: "nan"},
                {source: 80, target: 59, type: "friend-2", full_name_1: "Нестор Васильевич Кукольник", full_name_2: "Александр Павлович Брюллов", description: "nan"},
                {source: 80, target: 60, type: "friend-2", full_name_1: "Нестор Васильевич Кукольник", full_name_2: "Карл Павлович Брюллов", description: "nan"},
                {source: 80, target: 83, type: "friend-2", full_name_1: "Нестор Васильевич Кукольник", full_name_2: "Николай Васильевич Гоголь", description: "Нестор Кукольник, с которым, впрочем, Гоголь никогда не сходился"},
                {source: 80, target: 79, type: "friend-2", full_name_1: "Нестор Васильевич Кукольник", full_name_2: "Михаил Иванович Глинка", description: "В период ... Н. Кукольник сближается с композитором М. Глинкой"},
                {source: 80, target: 77, type: "friend-2", full_name_1: "Нестор Васильевич Кукольник", full_name_2: "Михаил Евграфович Салтыков-Щедрин", description: "В период ... Н. Кукольник сближается с композитором М. Глинкой"},
                {source: 80, target: 81, type: "friend-2", full_name_1: "Нестор Васильевич Кукольник", full_name_2: "Александр Сергеевич Пушкин", description: "В конце марта 1834 года состоялось знакомство Кукольника и Пушкина"},
                {source: 79, target: 81, type: "friend-2", full_name_1: "Михаил Иванович Глинка", full_name_2: "Александр Сергеевич Пушкин", description: "В пансионе он познакомился с А. С. Пушкиным"},
                {source: 79, target: 84, type: "friend-2", full_name_1: "Михаил Иванович Глинка", full_name_2: "Александр Сергеевич Грибоедов", description: "Он познакомился с Василием Жуковским, Александром Грибоедовым"},
                {source: 79, target: 5, type: "friend-2", full_name_1: "Михаил Иванович Глинка", full_name_2: "Валентин Александрович Серов", description: "Бывал у М. И. Глинки и А. Н. Серов, в 1852 году"},
                {source: 82, target: 85, type: "friend-2", full_name_1: "Евгений Абрамович Баратынский", full_name_2: "Михаил Юрьевич Лермонтов", description: "Изредка он ездил в Петербург, где в 1839 году познакомился с Михаилом Лермонтовым"},
                {source: 81, target: 85, type: "friend-2", full_name_1: "Александр Сергеевич Пушкин", full_name_2: "Михаил Юрьевич Лермонтов", description: "nan"},
                {source: 81, target: 84, type: "friend-2", full_name_1: "Александр Сергеевич Пушкин", full_name_2: "Александр Сергеевич Грибоедов", description: "nan"},
                {source: 74, target: 86, type: "friend-2", full_name_1: "Фёдор Михайлович Достоевский", full_name_2: "Владимир Сергеевич Соловьёв", description: "В Петербурге Соловьёв сдружился с Достоевским"},
                {source: 87, target: 86, type: "friend-2", full_name_1: "Николай Александрович Бердяев", full_name_2: "Владимир Сергеевич Соловьёв", description: "nan"},
                {source: 88, target: 38, type: "friend-2", full_name_1: "Константин Николаевич Леонтьев", full_name_2: "Иван Сергеевич Тургенев", description: "nan"},
                {source: 90, target: 27, type: "family", full_name_1: "Егор Иванович Маковский", full_name_2: "Константин Егорович Маковский", description: "Отец Константина"},
                {source: 90, target: 62, type: "family", full_name_1: "Егор Иванович Маковский", full_name_2: "Владимир Егорович Маковский", description: "Отец Владимира"},
                {source: 90, target: 63, type: "family", full_name_1: "Егор Иванович Маковский", full_name_2: "Николай Егорович Маковский", description: "Отец Николая"},
                {source: 90, target: 91, type: "family", full_name_1: "Егор Иванович Маковский", full_name_2: "Александра Егоровна Маковская", description: "Отец Александры"},
                {source: 91, target: 27, type: "family", full_name_1: "Александра Егоровна Маковская", full_name_2: "Константин Егорович Маковский", description: "Старшая сестра Константина"},
                {source: 91, target: 62, type: "family", full_name_1: "Александра Егоровна Маковская", full_name_2: "Владимир Егорович Маковский", description: "Старшая сестра Владимира"},
                {source: 91, target: 63, type: "family", full_name_1: "Александра Егоровна Маковская", full_name_2: "Николай Егорович Маковский", description: "Старшая сестра Николая"},
                {source: 92, target: 48, type: "family", full_name_1: "Андрей Иванович Сомов", full_name_2: "Константин Андреевич Сомов", description: "Отец Константина"},
                {source: 89, target: 53, type: "friend-2", full_name_1: "Иван Евменьевич Цветков", full_name_2: "Павел Михайлович Третьяков", description: "В формировании его как коллекционера сыграло общение с П. М. Третьяковым"},
                {source: 89, target: 92, type: "friend-2", full_name_1: "Иван Евменьевич Цветков", full_name_2: "Андрей Иванович Сомов", description: "В формировании его как коллекционера сыграло общение с А. И. Сомовым."},
                {source: 89, target: 90, type: "friend-2", full_name_1: "Иван Евменьевич Цветков", full_name_2: "Егор Иванович Маковский", description: "В формировании его как коллекционера сыграло общение с Е. И. Маковским"},
                {source: 90, target: 60, type: "friend-2", full_name_1: "Егор Иванович Маковский", full_name_2: "Карл Павлович Брюллов", description: "Был в дружеских отношениях с К. П. Брюлловым"},
                {source: 90, target: 93, type: "friend-2", full_name_1: "Егор Иванович Маковский", full_name_2: "Василий Андреевич Тропинин", description: "Был в дружеских отношениях с В. А. Тропининым"},
                {source: 94, target: 83, type: "friend-2", full_name_1: "Александр Андреевич Иванов", full_name_2: "Николай Васильевич Гоголь", description: "nan"},
                {source: 96, target: 95, type: "apprentice", full_name_1: "Михаил Константинович Клодт", full_name_2: "Николай Никанорович Дубовской", description: "продолжатель традиции пейзажа своего учителя академика М. К. Клодта"},
                {source: 25, target: 95, type: "friend-2", full_name_1: "Иван Николаевич Крамской", full_name_2: "Николай Никанорович Дубовской", description: "nan"},
                {source: 97, target: 96, type: "family", full_name_1: "Михаил Петрович Клодт", full_name_2: "Михаил Константинович Клодт", description: "двоюродным братом"},
                {source: 98, target: 103, type: "friend-2", full_name_1: "Александр Карлович Беггров", full_name_2: "Константин Аполлонович Савицкий", description: "Во Франции Беггров знакомится с ... (с И. Е. Репиным, К. А. Савицким)"},
                {source: 98, target: 3, type: "friend-2", full_name_1: "Александр Карлович Беггров", full_name_2: "Илья Ефимович Репин", description: "Во Франции Беггров знакомится с ... (с И. Е. Репиным, К. А. Савицким)"},
                {source: 99, target: 68, type: "friend-2", full_name_1: "Александр Александрович Киселёв", full_name_2: "Василий Максимович Максимов", description: "стал членом Артели художников, возглавляемой В. М. Максимовым"},
                {source: 99, target: 0, type: "friend-2", full_name_1: "Александр Александрович Киселёв", full_name_2: "Савва Иванович Мамонтов", description: "рисовальных вечерах у С. И. Мамонтова и В. Д. Поленова"},
                {source: 99, target: 1, type: "friend-2", full_name_1: "Александр Александрович Киселёв", full_name_2: "Василий Дмитриевич Поленов", description: "рисовальных вечерах у С. И. Мамонтова и В. Д. Поленова"},
                {source: 18, target: 100, type: "apprentice", full_name_1: "Василий Григорьевич Перов", full_name_2: "Николай Алексеевич Касаткин", description: "наставниками были Василий Перов и Илларион Прянишников."},
                {source: 64, target: 100, type: "apprentice", full_name_1: "Илларион Михайлович Прянишников", full_name_2: "Николай Алексеевич Касаткин", description: "наставниками были Василий Перов и Илларион Прянишников."},
                {source: 18, target: 101, type: "apprentice", full_name_1: "Василий Григорьевич Перов", full_name_2: "Алексей Михайлович Корин", description: "Его учителями были известные педагоги: ... Василий Перов..."},
                {source: 64, target: 101, type: "apprentice", full_name_1: "Илларион Михайлович Прянишников", full_name_2: "Алексей Михайлович Корин", description: "Его учителями были известные педагоги: ... Илларион Прянишников ..."},
                {source: 1, target: 101, type: "apprentice", full_name_1: "Василий Дмитриевич Поленов", full_name_2: "Алексей Михайлович Корин", description: "Его учителями были известные педагоги: ... Василий Поленов"},
                {source: 62, target: 101, type: "apprentice", full_name_1: "Владимир Егорович Маковский", full_name_2: "Алексей Михайлович Корин", description: "Его учителями были известные педагоги: ... Владимир Маковский ..."},
                {source: 102, target: 101, type: "family", full_name_1: "Павел Дмитриевич Корин", full_name_2: "Алексей Михайлович Корин", description: "Двоюродные братья"},
                {source: 102, target: 52, type: "friend-1", full_name_1: "Павел Дмитриевич Корин", full_name_2: "Михаил Васильевич Нестеров", description: "друг и последователь Михаила Нестерова"},
                {source: 97, target: 71, type: "friend-2", full_name_1: "Михаил Петрович Клодт", full_name_2: "Карл Викентьевич Лемох", description: "из воспоминаний Минченкова"},
                {source: 97, target: 66, type: "friend-2", full_name_1: "Михаил Петрович Клодт", full_name_2: "Ефим Ефимович Волков", description: "из воспоминаний Минченкова"},
                {source: 97, target: 68, type: "friend-2", full_name_1: "Михаил Петрович Клодт", full_name_2: "Василий Максимович Максимов", description: "из воспоминаний Минченкова"}
            ]
        };

        const group2color = {
            "Художники": "#0e7a0d",
            "Меценаты и Коллекционеры": "#d3af37",
            "Композиторы и Музыканты": "#b32134",
            "Врачи и Учёные": "#6082B6",
            "Архитекторы": "#ad6ce2",
            "Критики": "#895200",
            "Скульпторы": "#d859dc",
            "Певцы": "#f07f5e",
            "Писатели и Поэты": "#adbfc8",
            "Философы": "#d859dc",
            "Другие": "#333333"
        };

        const width = 2500, height = 2500;

        // Создание SVG
        const svg = d3.select("#graph")
            .append("svg")
            .attr("width", width)
            .attr("height", height);
        const sideTooltip = d3.select("#sideTooltip");

        // Инициализация симуляции
        // https://observablehq.com/@ben-tanen/a-tutorial-to-using-d3-force-from-someone-who-just-learned-ho
        // DO NOT TOUCH UNTIL GRAPH IS DONE
        const simulation = d3.forceSimulation(graph.nodes)
            .force("link", d3.forceLink(graph.links).id(d => d.id).distance(100))
            .force("charge", d3.forceManyBody().strength(-400))
            .force("center", d3.forceCenter(width / 2, height / 2))
            .force("collide", d3.forceCollide()
                .radius(50) // Радиус столкновения
                // .strength(0.6) // Сила столкновения
            );
        // DO NOT TOUCH UNTIL GRAPH IS DONE

        const tooltip = d3.select("body")
            .append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);


        const link = svg.append("g")
            .selectAll("line")
            .data(graph.links)
            .enter().append("line")
            .attr("class", "link")
            .attr("data-type", l => l.type); // Сохраняем тип в data-атрибуте
            // .classed(l => l.type, true);


        const node = svg.append("g")
            .selectAll("g")
            .data(graph.nodes)
            .enter().append("g")
            .attr("class", "node-container")
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended)
            );
        node.append("circle")
            .attr("class", "node-circle")
            .attr("fill", d => group2color[d.group]);
        node.append("image")
            .attr("class", "node-image")
            .attr("xlink:href", d => {
                if (d.img === "nan" || d.img === "") return "images/default.png";
                return "images/" + d.img || "images/default.png";
            });


        const label = svg.append("g")
            .selectAll("g")
            .data(graph.nodes)
            .enter().append("g")
            .attr("class", "label-container");
        label.append("rect")
            .attr("class", "label-bg");
        label.append("text")
            .text(d => d.abr_name)
            .attr("class", "label-text")
            .attr("dy", "35px");

        // Функции для drag&drop
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        // Обновление позиций при симуляции
        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            node.attr("transform", d => `translate(${d.x},${d.y})`);
            label.attr("transform", d => `translate(${d.x},${d.y})`);
        });

        // Переменные для отслеживания состояния
        let selectedNode = null;
        let selectedLink = null;


        // Обработчики событий для узлов
        node.on("click", function(event, d) {
            event.stopPropagation();

            if (selectedNode === null && !node.classed("node-container.dim")) {
                
                selectedNode = d;
                setValueNodes("highlight", false);
                setValueNode(selectedNode, "highlight", true);
                showNodeInfo(selectedNode);

                const connectedNodeIds = new Set();
                graph.links.forEach(link => {
                    if (link.source.id === selectedNode.id) connectedNodeIds.add(link.target.id);
                    if (link.target.id === selectedNode.id) connectedNodeIds.add(link.source.id);
                });

                graph.nodes
                    .filter(n => !connectedNodeIds.has(n.id) && n.id != selectedNode.id)
                    .forEach(n => setValueNode(n, "dim", true));

                graph.links
                    .filter(l => l.source.id != selectedNode.id && l.target.id != selectedNode.id)
                    .forEach(l => setValueLink(l, "dim", true));

            } else if (selectedNode.id !== d.id & !node.classed("node-container.dim")) {
                selectedNode2 = d;
                setValueNodes("highlight", false);
                setValueNode(selectedNode, "highlight", true);
                setValueNode(selectedNode2, "highlight", true);

                setValueLinks("highlight", false)
                const selectedLink = graph.links.find(l =>
                    (l.source.id === selectedNode.id && l.target.id === d.id) ||
                    (l.target.id === selectedNode.id && l.source.id === d.id)
                );
                if (selectedLink) {
                    setValueNode(d, "highlight", true);
                    setValueLink(selectedLink, "highlight", true)
                    showLinkInfo(selectedLink, selectedNode, d);
                }
            } else if (selectedNode.id === d.id) {
                setValueNodes("highlight", false);
                setValueLinks("highlight", false);
                setValueNode(selectedNode, "highlight", true);
                showNodeInfo(selectedNode);
            }
        });


        // Сброс подсветки при клике на пустое место
        svg.on("click", () => {
            resetSelection();
        });

        // Функция для показа бокового tooltip
        function showNodeInfo(d) {
            sideTooltip.html(`
                <div class="tooltip-header">
                    <h2 style="margin: 0; color: #333333;">${d.full_name}</h2>
                    <p style="margin: 5px 0 0 0; color: #666666; font-size: 12px;">${d.years}</p>
                </div>

                <div class="tooltip-content">
                    <div style="font-size: 14px; color: #444444;">
                        <p>
                            ${d.description}
                        </p>
                    </div>
                </div>
            `);

            // Показываем tooltip
            sideTooltip.classed("visible", true);
        }

        // Функция для показа информации о связи
        function showLinkInfo(linkData, sourceNode, targetNode) {
            sideTooltip.html(`
                <div class="tooltip-header">
                    <h2 style="margin: 0; color: #2c3e50;">Связь: ${sourceNode.abr_name} → ${targetNode.abr_name}</h2>
                </div>

                <div style="line-height: 1.6;">
                    <p>${linkData.description}</p>
                </div>
            `);

            sideTooltip.classed("visible", true);
        }


        // Скрытие при нажатии ESC
        d3.select("body")
            .on("keydown", function(event) {
            if (event.key === "Escape") {
                resetSelection();
            }
            });

        // Функция сброса выделения
        function resetSelection() {
            setValueLinks("dim", false);
            setValueNodes("dim", false);

            setValueLinks("highlight", false);
            setValueNodes("highlight", false);

            selectedNode = null;
            selectedNode2 = null;
            selectedLink = null;

            sideTooltip.classed("visible", false);
        }

        function createListControls() {
            // Простая проверка - выводим в консоль
            console.log("Создаем панель управления...");

            const allTags = [...new Set(graph.nodes.flatMap(node => node.tags))];
            const allGroups = [...new Set(graph.nodes.flatMap(node => node.group))];

            // Создаем самый простой вариант
            const controls = d3.select("body")
                .append("div")
                .html(`
                    <div style="
                        position: fixed;
                        top: 20px;
                        left: 20px;
                        background: white;
                        padding: 20px;
                        border-radius: 10px;
                        width: 350px;
                        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
                        z-index: 10000;
                        border: 1px solid white;
                    ">
                        <div style="margin-bottom: 15px;">
                            <h3 style="margin: 0 0 8px 0; font-size: 15px; font-family: sans-serif;">Люди</h3>
                            <div style="display: flex; flex-wrap: wrap; gap: 5px;">
                                ${allGroups.map(group => `
                                    <button onclick="filterNodesByGroup('${group}')"
                                            style="color: black; border: 1px solid ${group2color[group]};
                                                   padding: 4px 8px; border-radius: 12px; font-size: 11px; cursor: pointer;">
                                        ${group}
                                    </button>
                                `).join('')}
                            </div>
                            <br>
                            <h3 style="margin: 0 0 8px 0; font-size: 15px; font-family: sans-serif;">Общества, объединения, кружки</h3>
                            <div style="display: flex; flex-wrap: wrap; gap: 5px;">
                                ${allTags.map(tag => `
                                    <button onclick="filterNodesByTag('${tag}')"
                                            style="color: black; border: 1px solid white;
                                                   padding: 4px 8px; border-radius: 12px; font-size: 11px; cursor: pointer;">
                                        ${tag}
                                    </button>
                                `).join('')}
                            </div>
                        </div>

                    </div>
                `);
        }

        // Функция для фильтрации узлов по тегам
        function filterNodesByTag(tag) {
            setValueNodes("dim", false);
            setValueLinks("dim", false)

            const nonTaggedNodes = graph.nodes.filter(node => !node.tags.includes(tag));
            const nonTaggedNodesIds = new Set(nonTaggedNodes.map(n => n.id));

            graph.links
                .filter(l => nonTaggedNodesIds.has(l.source.id) ||
                             nonTaggedNodesIds.has(l.target.id))
                .forEach(l => setValueLink(l, "dim", true));

            graph.nodes
                .filter(n => nonTaggedNodesIds.has(n.id))
                .forEach(n => setValueNode(n, "dim", true));
        }

        function filterNodesByGroup(group) {
            setValueNodes("dim", false);
            setValueLinks("dim", false)

            const nonGroupNodes = graph.nodes.filter(node => node.group != group);
            const nonGroupNodesIds = new Set(nonGroupNodes.map(n => n.id));

            graph.links
                .filter(l => nonGroupNodesIds.has(l.source.id) ||
                             nonGroupNodesIds.has(l.target.id))
                .forEach(l => setValueLink(l, "dim", true));

            graph.nodes
                .filter(n => nonGroupNodesIds.has(n.id))
                .forEach(n => setValueNode(n, "dim", true));
        }


        function setValueNode(targetNode, key, value) {
            d3
                .selectAll(".node-container")
                .filter(d => targetNode === d)
                .classed(key, value);

            d3
                .selectAll(".label-container")
                .filter(d => targetNode === d)
                .classed(key, value);
        }

        function setValueNodes(key, value) {
            d3
                .selectAll(".node-container")
                .classed(key, value);
            d3
                .selectAll(".label-container")
                .classed(key, value);
        }

        function setValueLink(targetLink, key, value) {
            link
                .filter(l => l === targetLink)
                .classed(key, value);
        }

        function setValueLinks(key, value) {
            link.classed(key, value);
        }

        // Тестируем
        createListControls();

        function updateLabelBackgrounds() {
            label.select(".label-bg")
                .each(function(d) {
                    const textElement = this.nextSibling; // Следующий элемент - текст
                    const bbox = textElement.getBBox();

                    d3.select(this)
                        .attr("x", bbox.x - 4) // Отступы
                        .attr("y", bbox.y - 2)
                        .attr("width", bbox.width + 8)
                        .attr("height", bbox.height + 4);
                });
        }

        // Вызываем после создания и при обновлении
        setTimeout(updateLabelBackgrounds, 10);


    </script>
</body>
</html>